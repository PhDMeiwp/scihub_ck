# 20180201
## 版本
version 1.0.0.20180201_alpha

## 感想
随着在线功能的加入，Scihub_ck完成了第一个版本的开发。

### 功能
Scihub_ck目前具有如下功能：
1. 从262个域名中检查可用域名
2. 对可用域名进行访问速度测试
3. 本地版半自动地获得结果
4. 在线版自动获得按访问速度排序的结果

### 问题
反复思考审视，目前的版本还存在一些问题：
1. 域名覆盖度可能不全
2. 本地版自动化程度不高
3. 本地版平台兼容不好
4. 访问速度测试存在误差
5. 网页移动端展示比例无调整
6. 无可视化图表展示
7. 运行速度太慢

### 方案
针对以上问题，逐条讨论解决方案：
1. 域名覆盖度不全的问题，在Sci-hub网站目前还不是特别严重。按之前的规律，Sci-hub通常采用国家一级域名。所以这个问题先放放。
2. 本地版自动化程度的提高，将在线版的自动更新脚本修改一下，上传到github即可。
3. 本地版平台兼容性的提高，困难比较大，因为核心工具依赖了curl命令，在windows系统上估计有问题。尝试用Perl把curl的网页下载和网页访问测速的功能重写一下，还需要把文件筛选（ls、grep）、文件清除（rm）重写一下。重写完打包成exe文件。（否定）这种办法太费事了。不如再把Docker好好看一看，打包到docker，代码什么的还是linux系统更舒适。所以这一条也不管了，先优化别的，最后用docker打包一下，就算间接解决平台问题了。
4. 访问速度的误差问题，是因为测试访问速度的时候没有做重复，应该重复5次，取一个平均值。（否定）单单这样还不行。每个时段的网速是不一致的，需要进行矫正。应该以某一个网站（比如百度）为基准，测试5次取平均代表瞬间的网速水平，以基准网速对每个网站的访问速度进行标准化，具体的标准化方法还没想。
5. 网页移动端展示比例的问题，可以加上js的代码部分，或者再研究一下html和css，试一试挂在github上能不能自动调整，肯定是有方法的，其他挂在github上的网站就没这个问题。这个问题随缘，慢慢解决。
6. 可视化图的展示问题，希望用js实现交互式的展示，但是github可能不支持，所以目前比较方便的实现方法就是在本地跑R画好图，贴到相应的位置就好。最近想过几种图：（1）各可用域名访问速度的近24小时的折线图；（2）各可用域名近一年的访问速度热图[仿Github用户活跃度图]；（3）各可用域名近24小时的访问速度热图[仿新浪用户活跃度图]；（4）词云。
7. 运行速度的问题，通过调整策略进行改善。每天凌晨3点、中午12点、下午5点，运行不限时的全域名检查（目前是每次都运行全域名检查，但限时不超过3秒响应）。其他时段根据全域名检查结果，只检测更新有效域名（通常10个左右），这样耗时就可以从原先的15分钟缩短到2分钟以内，可以将更新频率由原先的2小时一次，加密到5分钟一次。需要注意将两个策略的程序及数据做好分隔，以防冲突。不过不知道更新这么频繁会不会被封号？

### 总结
完成了基本功能，可以使用了，后续就是一点点优化完善。词云的想法最有意思，两步走的策略最有益于提升效率，本地化版本自动化最容易实现，先把这个问题解决，在线版的美化问题，一点点来。




